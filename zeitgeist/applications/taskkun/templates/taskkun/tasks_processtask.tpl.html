<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/admin.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- InstanceBeginEditable name="doctitle" -->
<title>Taskkun</title>
<!-- InstanceEndEditable -->

<link rel="stylesheet" type="text/css" href="@@{templatepath}@@/css/taskkun.css" />

<script language="javascript" type="text/javascript">

	function showTooltip(text, event)
	{
		document.getElementById('Tooltip').innerHTML = text;

		var topPixel = event.clientY + 10;
		var leftPixel = event.clientX + 10;

		document.getElementById('Tooltip').style.top = topPixel + "px";
		document.getElementById('Tooltip').style.left = leftPixel + "px";
		document.getElementById('Tooltip').style.display = "block";
	}

	function hideTooltip()
	{
		document.getElementById('Tooltip').innerHTML = "";

		document.getElementById('Tooltip').style.top = "0px";
		document.getElementById('Tooltip').style.left = "0px";
		document.getElementById('Tooltip').style.display = "none";
	}

</script>
	
<!-- InstanceBeginEditable name="head" -->

	<script language="JavaScript" type="text/javascript" src="@@{templatepath}@@/Spry/SpryData.js"></script>
	<script language="JavaScript" type="text/javascript" src="@@{templatepath}@@/Spry/xpath.js"></script>
	<script language="Javascript" type="text/javascript" src="@@{templatepath}@@/Spry/SpryNestedXMLDataSet.js"></script>
	<script language="Javascript" type="text/javascript" src="@@{templatepath}@@/js/SpryExtensions.js"></script>

	<script language="javascript" type="text/javascript">

		var dsTasklogs = new Spry.Data.XMLDataSet("@@{[dataserver.gettasklogs]}@@&id=@@{taskid}@@", "container/element");
	
		var bShowShortcuts = false;
		shortcutUp = new Image();
		shortcutUp.src = "@@{templatepath}@@/nuvola/22x22/actions/1uparrow.png";
		shortcutDown = new Image();
		shortcutDown.src = "@@{templatepath}@@/nuvola/22x22/actions/tool_dock.png";
	
		function showShortcuts()
		{
			if (bShowShortcuts == false)
			{
				bShowShortcuts = true;
				document.getElementById('Shortcuts').style.display = "block";
				document.images["shortcutIcon"].src = shortcutUp.src;
			}
			else
			{
				bShowShortcuts = false;
				document.getElementById('Shortcuts').style.display = "none";
				document.images["shortcutIcon"].src = shortcutDown.src;
			}
		}
		
		function submitForm(buttonid)
		{
			document.processTasklog.submitButton.value = buttonid;
			document.processTasklog.submit();
		}

	</script>

<!-- InstanceEndEditable -->
</head>

<body>

<div id="Tooltip" class="tooltip" style="display:none; text-align:left;"></div>
<div class="maincontent">
<div class="headmenu">
	<h1>Taskkun :)</h1>
	<div class="menuicon" style="float:right; margin-top:-40px;"><a href="@@{[main.logout]}@@" alt=""><span onmousemove="showTooltip('Logout', event)" onmouseout="hideTooltip()">
	<img src="@@{templatepath}@@/nuvola/32x32/actions/exit.png" alt="" align="left" border="0" /></span></a></div>

</div>

<!-- TemplateBeginBlock name="navigation" -->
	<div class="textbox">
		<div style="float:left; margin:10px;"><a href="@@{[main.index]}@@" alt=""><span onmousemove="showTooltip('Hauptseite', event)" onmouseout="hideTooltip()">
		<img src="@@{templatepath}@@/nuvola/48x48/actions/gohome.png" alt="" border="0" /></span></a></div>
		<div style="float:left; margin:10px;"><a href="@@{[tasks.index]}@@" alt=""><span onmousemove="showTooltip('Meine Aufgaben', event)" onmouseout="hideTooltip()">
		<img src="@@{templatepath}@@/nuvola/48x48/apps/klipper.png" alt="" border="0" /></span></a></div>
		<div style="float:left; margin:10px;"><a href="@@{[tasks.addadhoc]}@@" alt=""><span onmousemove="showTooltip('Ad-Hoc-Tätigkeit eintragen', event)" onmouseout="hideTooltip()">
		<img src="@@{templatepath}@@/nuvola/48x48/apps/karm.png" alt="" border="0" /></span></a></div>
		<div style="float:left; margin:10px;"><a href="@@{[config.self]}@@" alt=""><span onmousemove="showTooltip('Persönliche Einstellungen', event)" onmouseout="hideTooltip()">
		<img src="@@{templatepath}@@/nuvola/48x48/apps/kcmsystem.png" alt="" border="0" /></span></a></div>
		<div style="float:right; margin:10px;"><a href="@@{[help.index]}@@" alt=""><span onmousemove="showTooltip('Hilfe!', event)" onmouseout="hideTooltip()">
		<img src="@@{templatepath}@@/nuvola/48x48/apps/filetypes.png" alt="" border="0" /></span></a></div>
		
		<div style="clear:both"></div>
	</div>
<!-- TemplateEndBlock -->

<!-- TemplateBeginBlock name="managernavigation" -->
	<div class="textbox">
		<div style="float:left; margin:10px;"><a href="@@{[tasks.addtask]}@@" alt=""><span onmousemove="showTooltip('Neue Aufgabe anlegen', event)" onmouseout="hideTooltip()">
		<img src="@@{templatepath}@@/nuvola/48x48/apps/kword.png" alt="" border="0" /></span></a></div>
		<div style="float:left; margin:10px;"><a href="@@{[tasks.showalltasks]}@@" alt=""><span onmousemove="showTooltip('Alle aktiven Aufgaben anzeigen', event)" onmouseout="hideTooltip()">
		<img src="@@{templatepath}@@/nuvola/48x48/apps/kpager.png" alt="" border="0" /></span></a></div>
		<div style="float:left; margin:10px;"><a href="@@{[search.index]}@@" alt=""><span onmousemove="showTooltip('Aufgaben suchen', event)" onmouseout="hideTooltip()">
		<img src="@@{templatepath}@@/nuvola/48x48/apps/kpdf.png" alt="" border="0" /></span></a></div>
		<div style="float:left; margin:10px;"><a href="@@{[analyze.index]}@@" alt=""><span onmousemove="showTooltip('Statistiken anzeigen', event)" onmouseout="hideTooltip()">
		<img src="@@{templatepath}@@/nuvola/48x48/apps/kchart.png" alt="" border="0" /></span></a></div>

		<!-- TemplateBeginBlock name="adminnavigation" -->
		<div style="float:right; margin:10px;"><a href="@@{[config.overviewpriorities]}@@" alt=""><span onmousemove="showTooltip('Prioritäten verwalten', event)" onmouseout="hideTooltip()">
		<img src="@@{templatepath}@@/nuvola/48x48/apps/ksysv.png" alt="" border="0" /></span></a></div>
		<div style="float:right; margin:10px;"><a href="@@{[config.overviewtasktypes]}@@" alt=""><span onmousemove="showTooltip('Aufgabentypen verwalten', event)" onmouseout="hideTooltip()">
		<img src="@@{templatepath}@@/nuvola/48x48/apps/fsview.png" alt="" border="0" /></span></a></div>
		<div style="float:right; margin:10px;"><a href="@@{[config.overviewusergroups]}@@" alt=""><span onmousemove="showTooltip('Benutzergruppen verwalten', event)" onmouseout="hideTooltip()">
		<img src="@@{templatepath}@@/nuvola/48x48/apps/kdmconfig.png" alt="" border="0" /></span></a></div>
		<div style="float:right; margin:10px;"><a href="@@{[users.index]}@@" alt=""><span onmousemove="showTooltip('Benutzer verwalten', event)" onmouseout="hideTooltip()">
		<img src="@@{templatepath}@@/nuvola/48x48/mimetypes/vcard.png" alt="" border="0" /></span></a></div>
		<!-- TemplateEndBlock -->
		
		<div style="clear:both"></div>
	</div>
<!-- TemplateEndBlock -->

<!-- InstanceBeginEditable name="pagetitle" -->

<!-- InstanceEndEditable -->

	<!-- TemplateBeginBlock name="usermessage" -->
		<h3 class="usermessage"><img src="@@{templatepath}@@/nuvola/16x16/actions/ok.png" alt="" align="left" style="margin-right:5px;" /> @@{usermessage}@@</h3>
	<!-- TemplateEndBlock -->

	<!-- TemplateBeginBlock name="userwarnings" -->
		<h3 class="userwarning"><img src="@@{templatepath}@@/nuvola/16x16/actions/messagebox_info.png" alt="" align="left" style="margin-right:5px;" /> @@{userwarning}@@</h3>
	<!-- TemplateEndBlock -->

	<!-- TemplateBeginBlock name="usererrors" -->
		<h3 class="usererror"><img src="@@{templatepath}@@/nuvola/16x16/actions/no.png" alt="" align="left" style="margin-right:5px;" /> @@{usererror}@@</h3>
	<!-- TemplateEndBlock -->
	
<!-- InstanceBeginEditable name="body" -->

<div class="textbox">
	<h2 style="text-align:left;">Bisherige Tätigkeiten <span style="float:right; margin-top:-20px;"><a href="javascript:showShortcuts();" alt=""><span onmousemove="showTooltip('Bisherige Tätigkeiten', event)" onmouseout="hideTooltip()"><img src="@@{templatepath}@@/nuvola/22x22/actions/tool_dock.png" alt="" name="shortcutIcon" align="left" border="0" /></span></a></span></h2>
	<div style="clear:both"></div>
	
	<div id="Shortcuts" style="padding:0px; display:none;">

	<div spry:region="dsTasklogs">
    <div spry:state="loading"><p style="text-align:center;"><img src="@@{templatepath}@@/images/loading.gif" alt="" /></p></div>

	<div spry:state="ready">
	    <table border="0" cellspacing="0" cellpadding="0" width=100%">
	        <tr class="tablehead">
				<th width="40"><p style="text-align:center;"><a onclick="dsTasklogs.sort('tasklog_id');">ID</a></p></th>
				<th width="150"><p style="text-align:center;"><a onclick="dsTasklogs.sort('tasklog_username');">Bearbeitet von</a></p></th>
				<th width="100"><p style="text-align:center;"><a onclick="dsTasklogs.sort('task_hoursworked');">Dauer</a></p></th>
				<th><p>Tätigkeitbeschreibung</p></th>
				<th width="200"><p style="text-align:center;"><a onclick="dsTasklogs.sort('tasklog_timestamp');">Datum</a></p></th>
				<th><p>Aktionen</p></th>
	        </tr>
	        <tr class="{ds_EvenOddRow}" spry:repeat="dsTasklogs">
				<td valign="top"><p style="text-align:center;">{dsTasklogs::tasklog_id}</p></td>
				<td valign="top"><p style="text-align:center;">{dsTasklogs::tasklog_username}</p></td>
				<td valign="top"><p style="text-align:center;">{dsTasklogs::tasklog_hoursworked}</p></td>
				<td valign="top"><p>{dsTasklogs::tasklog_description}</p></td>
				<td valign="top"><p style="text-align:center;">{dsTasklogs::tasklog_timestamp}</p></td>
				<td width="90"><p></p></td>
	        </tr>
	    </table>
    </div>
	</div>
	</div>
</div>

<form method="post" action="@@{tasks.processtask}@@" name="processTasklog" enctype="multipart/form-data; charset=utf-8">
<div class="textbox">
	<input type="hidden" name="taskid" value="@@{taskid}@@" />
	<input type="hidden" name="submitButton" value="0" />
	<h2>Tätigkeit eintragen für: "@@{task_name}@@"</h2>

	<table width="100%" cellspacing="5" cellpadding="5" border="0">
	<tbody>
		<tr>
			<td align="right" nowrap="nowrap" valign="top"><p class="formlabel">Tätigkeits-<br />beschreibung*</p></td>
			<td align="left" nowrap="nowrap" valign="middle"><textarea rows="5" name="tasklog_description" class="formtext" style="height:175px; width:750px;"></textarea></td>
		</tr>
		<tr>
			<td align="right" nowrap="nowrap" valign="top" width="140"><p class="formlabel">Dauer</p></td>
			<td align="left" nowrap="nowrap" valign="middle" colspan="2"><input maxlength="6" style="width:60px;" name="tasklog_hoursworked" value="" class="formtext" type="text"> (Angabe in Stunden. Dezimalstellen durch Punkt oder Komma)</td>
		</tr>
		<tr>
		<td colspan="2">
			<p style="text-align:center;"><img src="@@{templatepath}@@/nuvola/32x32/apps/kate.png" alt="" border="0" align="top" />
			<button name="addTasklog" value="Tätigkeit hinzufügen" class="formbutton" type="button" onclick="submitForm('1');" />Tätigkeit hinzufügen</button></p>
		</td>
		</tr>
	</tbody>
	</table>	
</div>

<div class="textbox">
	<table width="100%" cellspacing="5" cellpadding="5" border="0">
	<tbody>
		<tr>
		<td><p style="text-align:center;"><img src="@@{templatepath}@@/nuvola/32x32/actions/kaboodleloop.png" alt="" border="0" align="top" />
		<span onmousemove="showTooltip('Gibt die Aufgabe eine Ebene im Ablauf zurück.<br />Dies kann der Fall sein, falls eine Aufgabe noch nicht<br />bearbeitet werden kann oder fehlerhaft ist.', event)" onmouseout="hideTooltip()"><input name="returnTask" value="Aufgabe zurückgeben" class="formbutton" type="button" onclick="submitForm('2');" /></span></p></td>
		<td><p style="text-align:center;"><img src="@@{templatepath}@@/nuvola/32x32/apps/korganizer.png" alt="" border="0" align="top" />
		<span onmousemove="showTooltip('Markiert die Aufgabe als abgeschlossen<br />und gibt die Aufgabe eine Ebene im Ablauf weiter.', event)" onmouseout="hideTooltip()"><input name="finishTask" value="Aufgabe abschließen" class="formbutton" type="button" onClick="submitForm('3');" /></span></p></td>
		</tr>
	</tbody>
	</table>	
</div>
</form>	
	
</div>

<!-- InstanceEndEditable -->

</div>

</body>
<!-- InstanceEnd --></html>
