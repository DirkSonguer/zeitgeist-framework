<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/lineracer.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- InstanceBeginEditable name="doctitle" -->
<title>Lineracer</title>
<!-- InstanceEndEditable -->

<link rel="stylesheet" type="text/css" href="@@{templatepath}@@/css/lineracer.css" />

<script language="javascript" type="text/javascript">


</script>
	
<!-- InstanceBeginEditable name="head" -->

	<script language="JavaScript" type="text/javascript" src="@@{templatepath}@@/includes/Spry/SpryData.js"></script>
	<script language="JavaScript" type="text/javascript" src="@@{templatepath}@@/includes/Spry/xpath.js"></script>
	<script language="Javascript" type="text/javascript" src="@@{templatepath}@@/includes/Spry/SpryNestedXMLDataSet.js"></script>
	<script language="Javascript" type="text/javascript" src="@@{templatepath}@@/includes/Spry/SpryDOMUtils.js"></script>
	<script language="Javascript" type="text/javascript" src="@@{templatepath}@@/js/SpryExtensions.js"></script>

	<script type="text/javascript">

		var dsLobbydata = new Spry.Data.XMLDataSet("@@{[dataserver.getgameroomdata]}@@", "container/element", { useCache:  false, loadInterval: 10000 });
		dsLobbydata.setColumnType("lobby_id", "number");

		function startGame(sTrigger)
		{
//			alert("hallo" + sText);
		}

	</script>

<!-- InstanceEndEditable -->
</head>

<body>

	<!-- TemplateBeginBlock name="usermessage" -->
		<h3 class="usermessage"><img src="@@{templatepath}@@/nuvola/16x16/actions/ok.png" alt="" align="left" style="margin-right:5px;" /> @@{usermessage}@@</h3>
	<!-- TemplateEndBlock -->

	<!-- TemplateBeginBlock name="userwarnings" -->
		<h3 class="userwarning"><img src="@@{templatepath}@@/nuvola/16x16/actions/messagebox_info.png" alt="" align="left" style="margin-right:5px;" /> @@{userwarning}@@</h3>
	<!-- TemplateEndBlock -->

	<!-- TemplateBeginBlock name="usererrors" -->
		<h3 class="usererror"><img src="@@{templatepath}@@/nuvola/16x16/actions/no.png" alt="" align="left" style="margin-right:5px;" /> @@{usererror}@@</h3>
	<!-- TemplateEndBlock -->

	<h1>Lineracer</h1>

	<!-- TemplateBeginBlock name="loginbox" -->
		<div class="textbox" style="width:400px;">
			<form method="post" action="@@{[main.login]}@@" name="login">

				<table border="0" cellpadding="0" cellspacing="0" style="margin-bottom:10px;">
					<tr>
						<td align="right" nowrap width="110"><p>Username</p></td>
						<td align="left" valign="middle" nowrap><input type="text" size="35" maxlength="20" name="username" class="formtext" style="width:250px;" /></td>
					</tr>
					<tr>
						<td align="right" nowrap><p>Password</p></td>
						<td align="left" valign="middle" nowrap><input type="password" size="35" maxlength="32" name="password" class="formtext" style="width:250px;" /></td>

					</tr>
					<tr>
						<td align="left" nowrap>&nbsp;</td>
						<td align="right" valign="middle" nowrap><input type="submit" name="login" value="Login" class="formbutton" /></td>
					</tr>
				</table>
				<p><a href="@@{[main.register]}@@">Neuen Nutzer erstellen</a></p>
			</form>		
		</div>
	<!-- TemplateEndBlock -->
	
	<!-- TemplateBeginBlock name="logoutbox" -->
		<div class="textbox" style="width:400px;">
			<p>Hallo, du bist eingeloggt</p>
			<p><a href="@@{[main.index]}@@">Hauptseite</a></p>
			<p><a href="@@{[lobby.index]}@@">Zur Lobby</a></p>
			<p><a href="@@{[main.logout]}@@">Ausloggen</a></p>
		</div>
	<!-- TemplateEndBlock -->	

	<!-- TemplateBeginBlock name="gamebox" -->
		<div class="textbox" style="width:400px;">
			<p>Du fährst gerade ein Rennen: <a href="@@{[game.index]}@@">zum Rennen</a></p>
		</div>
	<!-- TemplateEndBlock -->	

	<!-- TemplateBeginBlock name="lobbybox" -->
		<div class="textbox" style="width:400px;">
			<p>Du wartest bereits auf ein Rennen: <a href="@@{[lobby.showgameroom]}@@">zur Rennvorbereitung</a></p>
		</div>
	<!-- TemplateEndBlock -->	

<!-- InstanceBeginEditable name="body" -->

<p>Main Index</p>

<p>Aktuelles Spiel:</p>
<div class="textbox">
	<div spry:region="dsLobbydata">
    <div spry:state="loading"><p style="text-align:center;"><img src="@@{templatepath}@@/images/loading.gif" alt="" /></p></div>

	<div spry:state="ready" style="text-align:left;">
	<p>Max Spieler: {dsLobbydata::lobby_maxplayers}</p>
	<p>Strecke: {dsLobbydata::circuit_name}</p>

	    <table border="0" cellspacing="0" cellpadding="0" width=100%">
	        <tr class="tablehead">
				<th><p>Spieler</p></th>
	        </tr>
	        <tr class="{ds_EvenOddRow}" spry:repeat="dsLobbydata">
				<td><p>{dsLobbydata::user_username}</p></td>
	        </tr>
	    </table>

		<div spry:choose="spry:choose">
			<div spry:when="'{dsLobbydata::circuit_name}' == ''"></div>
			<div spry:default="spry:default"><script type="text/javascript">Spry.Utils.addLoadListener(startGame('{dsLobbydata::circuit_name}'));</script></div>
		</div>
	</div>
	</div>
</div>

<p><a href="@@{[lobby.leavegameroom]}@@">Raum verlassen</a></p>
<p><a href="@@{[main.index]}@@">Zurück zur Hauptseite</a></p>

<!-- InstanceEndEditable -->

</body>
<!-- InstanceEnd --></html>
