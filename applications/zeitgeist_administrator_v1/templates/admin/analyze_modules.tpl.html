<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/admin.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- InstanceBeginEditable name="doctitle" -->
<title>Zeitgeist Administrator</title>
<!-- InstanceEndEditable -->

<link rel="stylesheet" type="text/css" href="@@{templatepath}@@/css/admin.css" />

<script language="javascript" type="text/javascript">

	var bShowShortcuts = false;
	shortcutUp = new Image();
	shortcutUp.src = "@@{templatepath}@@/nuvola/22x22/actions/1uparrow.png";
	shortcutDown = new Image();
	shortcutDown.src = "@@{templatepath}@@/nuvola/22x22/actions/tool_dock.png";

	function showTooltip(text, event)
	{
		document.getElementById('Tooltip').innerHTML = text;

		var topPixel = event.clientY + 10;
		var leftPixel = event.clientX + 10;

		document.getElementById('Tooltip').style.top = topPixel + "px";
		document.getElementById('Tooltip').style.left = leftPixel + "px";
		document.getElementById('Tooltip').style.display = "block";
	}

	function hideTooltip()
	{
		document.getElementById('Tooltip').innerHTML = "";

		document.getElementById('Tooltip').style.top = "0px";
		document.getElementById('Tooltip').style.left = "0px";
		document.getElementById('Tooltip').style.display = "none";
	}

	function showShortcuts()
	{
		if (bShowShortcuts == false)
		{
			bShowShortcuts = true;
			document.getElementById('Shortcuts').style.display = "block";
			document.images["shortcutIcon"].src = shortcutUp.src;
		}
		else
		{
			bShowShortcuts = false;
			document.getElementById('Shortcuts').style.display = "none";
			document.images["shortcutIcon"].src = shortcutDown.src;
		}
	}

</script>

<!-- InstanceBeginEditable name="head" -->

	<script language="JavaScript" type="text/javascript" src="@@{templatepath}@@/Spry/SpryData.js"></script>
	<script language="JavaScript" type="text/javascript" src="@@{templatepath}@@/Spry/xpath.js"></script>
	<script language="Javascript" type="text/javascript" src="@@{templatepath}@@/Spry/SpryNestedXMLDataSet.js"></script>
	<script language="Javascript" type="text/javascript" src="@@{templatepath}@@/js/SpryExtensions.js"></script>

	<script type="text/javascript">

		var dsModules = new Spry.Data.XMLDataSet("@@{[dataserver.getmoduleinfo]}@@", "container/element");
		var dsActionAnalytics = new Spry.Data.XMLDataSet("@@{[dataserver.getmoduledetailanalytics]}@@", "container/element");

		function filterModules()
		{
			filterParameter = document.getElementById('filter_modules').value;
			filterSpryDataset('action_module', filterParameter, dsActionAnalytics);
		}

	</script>

<!-- InstanceEndEditable -->
</head>

<body>

<div id="Tooltip" class="tooltip" style="display: none;"></div>
<div class="maincontent">
<div class="headmenu">
		<h1><img src="@@{templatepath}@@/nuvola/32x32/apps/kcontrol.png" alt="" align="left" style="margin-right:10px;" /> ZGA <i>zeitgeist administration tool</i></h1>

	<!-- TemplateBeginBlock name="mainmenu" -->
		<div class="menuleiste">

		<div class="menuicon"><a href="@@{[main.index]}@@" alt=""><span onmousemove="showTooltip('ZGA Index', event)" onmouseout="hideTooltip()">
        <img src="@@{templatepath}@@/nuvola/22x22/actions/gohome.png" alt="" align="left" border="0" /></span></a></div>
		<div class="menuicon"><a href="@@{[setup.index]}@@" alt=""><span onmousemove="showTooltip('Setup application', event)" onmouseout="hideTooltip()">
        <img src="@@{templatepath}@@/nuvola/22x22/apps/kcmkwm.png" alt="" align="left" border="0" /></span></a></div>
		<div class="menuicon"><a href="@@{[users.index]}@@" alt=""><span onmousemove="showTooltip('Manage application users', event)" onmouseout="hideTooltip()">
        <img src="@@{templatepath}@@/nuvola/22x22/apps/kuser.png" alt="" align="left" border="0" /></span></a></div>
		<div class="menuicon"><a href="@@{[analyze.index]}@@" alt=""><span onmousemove="showTooltip('Analyze application traffic', event)" onmouseout="hideTooltip()">
        <img src="@@{templatepath}@@/nuvola/22x22/apps/kchart.png" alt="" align="left" border="0" /></span></a></div>
		<div class="menuicon"><a href="@@{[configure.index]}@@" alt=""><span onmousemove="showTooltip('Configure ZGA', event)" onmouseout="hideTooltip()">
        <img src="@@{templatepath}@@/nuvola/22x22/apps/kcmdf.png" alt="" align="left" border="0" /></span></a></div>
		<div class="menuicon" style="float:right;"><a href="@@{[main.logout]}@@" alt=""><span onmousemove="showTooltip('Logout', event)" onmouseout="hideTooltip()">
        <img src="@@{templatepath}@@/nuvola/22x22/actions/exit.png" alt="" align="left" border="0" /></span></a></div>
		<div class="menuicon" style="float:right;"><a href="javascript:showShortcuts();" alt=""><span onmousemove="showTooltip('Show/hide shortcuts', event)" onmouseout="hideTooltip()">
        <img src="@@{templatepath}@@/nuvola/22x22/actions/tool_dock.png" alt="" name="shortcutIcon" align="left" border="0" /></span></a></div>

		<div style="clear:both"></div>
		</div>
	<!-- TemplateEndBlock -->
</div>

<div class="textbox" id="Shortcuts" style="margin-top:-15px; padding:5px; display:none;">
	<div class="menuicon"><a href="@@{[setup.managemodules]}@@" alt=""><span onmousemove="showTooltip('Manage modules', event)" onmouseout="hideTooltip()">
	<img src="@@{templatepath}@@/nuvola/22x22/apps/kalzium.png" alt="" border="0" /></span></a></div>
	<div class="menuicon" style="margin-left:-5px; margin-right:15px;"><a href="@@{[setup.addmodule]}@@" alt=""><span onmousemove="showTooltip('Add new module', event)" onmouseout="hideTooltip()">
	<img src="@@{templatepath}@@/nuvola/16x16/actions/edit_add.png" alt="" border="0" /></span></a></div>

	<div class="menuicon"><a href="@@{[setup.manageactions]}@@" alt=""><span onmousemove="showTooltip('Manage actions', event)" onmouseout="hideTooltip()">
	<img src="@@{templatepath}@@/nuvola/22x22/apps/flashkard.png" alt="" align="left" border="0" /></span></a></div>
	<div class="menuicon" style="margin-left:-5px; margin-right:15px;"><a href="@@{[setup.addaction]}@@" alt=""><span onmousemove="showTooltip('Add new action', event)" onmouseout="hideTooltip()">
	<img src="@@{templatepath}@@/nuvola/16x16/actions/edit_add.png" alt="" border="0" /></span></a></div>

	<div class="menuicon"><a href="@@{[setup.manageuserroles]}@@" alt=""><span onmousemove="showTooltip('Manage userroles', event)" onmouseout="hideTooltip()">
	<img src="@@{templatepath}@@/nuvola/22x22/mimetypes/vcard.png" alt="" align="left" border="0" /></span></a></div>
	<div class="menuicon" style="margin-left:-5px; margin-right:15px;"><a href="@@{[setup.adduserrole]}@@" alt=""><span onmousemove="showTooltip('Add new userrole', event)" onmouseout="hideTooltip()">
	<img src="@@{templatepath}@@/nuvola/16x16/actions/edit_add.png" alt="" border="0" /></span></a></div>

	<div class="menuicon"><a href="@@{[setup.manageusedata]}@@" alt=""><span onmousemove="showTooltip('Manage userdata', event)" onmouseout="hideTooltip()">
	<img src="@@{templatepath}@@/nuvola/22x22/mimetypes/wordprocessing.png" alt="" align="left" border="0" /></span></a></div>

	<div class="menuicon"><a href="@@{[users.index]}@@" alt=""><span onmousemove="showTooltip('Manage users', event)" onmouseout="hideTooltip()">
	<img src="@@{templatepath}@@/nuvola/22x22/apps/kuser.png" alt="" align="left" border="0" /></span></a></div>
	<div class="menuicon" style="margin-left:-5px; margin-right:15px;"><a href="@@{[users.adduser]}@@" alt=""><span onmousemove="showTooltip('Add new user', event)" onmouseout="hideTooltip()">
	<img src="@@{templatepath}@@/nuvola/16x16/actions/edit_add.png" alt="" border="0" /></span></a></div>

	<div style="clear:both"></div>
</div>

<!-- InstanceBeginEditable name="pagetitle" -->
<!-- InstanceEndEditable -->

	<!-- TemplateBeginBlock name="usermessage" -->
		<h3 class="usermessage"><img src="@@{templatepath}@@/nuvola/16x16/actions/ok.png" alt="" align="left" style="margin-right:5px;" /> @@{usermessage}@@</h3>
	<!-- TemplateEndBlock -->

	<!-- TemplateBeginBlock name="userwarnings" -->
		<h3 class="userwarning"><img src="@@{templatepath}@@/nuvola/16x16/actions/messagebox_info.png" alt="" align="left" style="margin-right:5px;" /> @@{userwarning}@@</h3>
	<!-- TemplateEndBlock -->

	<!-- TemplateBeginBlock name="usererrors" -->
		<h3 class="usererror"><img src="@@{templatepath}@@/nuvola/16x16/actions/no.png" alt="" align="left" style="margin-right:5px;" /> @@{usererror}@@</h3>
	<!-- TemplateEndBlock -->

<!-- InstanceBeginEditable name="body" -->

<h2>Module detail analytics</h2>

<form name="searchform" method="POST" action="#">
<div class="textbox" style="padding:10px;">
<table border="0" cellpadding="0" cellspacing="0" cellpadding="0" cellspacing="0">
	<tr>
		<td width="130" valign="middle" rowspan="4">
			<p><img src="@@{templatepath}@@/nuvola/64x64/apps/kghostview.png" alt="Filter actions" border="0" /></p>
		</td>
		<td colspan="2">
			<h2 style="margin-top:5px; margin-bottom:5px;">Choose module to see details</h2>
		</td>
	</tr>
	<tr>
		<td align="left" valign="middle">
			<p style="margin-bottom:0px; padding-bottom:5px;">Module</p>
		</td>
		<td align="left" valign="middle">
			<div spry:region="dsModules">
			<select id="filter_modules" class="eingabefeld" style="width:255px;" onchange="filterModules()">
				<option value="-1">All</option>
				<option spry:repeat="dsModules" value="{module_id}">{module_name}</option>
			</select>
			</p>
			</div>
		</td>
	</tr>
	<tr>
		<td align="left" valign="middle">&nbsp;</td>
		<td align="left" valign="middle">&nbsp;</td>
	</tr>
</table>
</div>

<div class="textbox">
	<div spry:region="dsActionAnalytics">
    <div spry:state="loading"><p style="text-align:center;"><img src="@@{templatepath}@@/images/loading.gif" alt="" /></p></div>

	<div spry:state="ready">
	    <table border="0" cellspacing="0" cellpadding="0" width=100%">
	        <tr class="tablehead">
				<th><p><a onclick="dsActionAnalytics.sort('trafficlog_action');">ID</a></p></th>
				<th><p><a onclick="dsActionAnalytics.sort('action_name');">Name</a></p></th>
				<th><p>Description</p></th>
				<th><p><a onclick="dsActionAnalytics.sort('action_views');">Views</a></p></th>
				<th><p><a onclick="dsActionAnalytics.sort('module_name');">Module</a></p></th>
	        </tr>
	        <tr class="{ds_EvenOddRow}" spry:repeat="dsActionAnalytics">
				<td><p>{dsActionAnalytics::trafficlog_action}</p></td>
				<td><p>{dsActionAnalytics::action_name}</p></td>
				<td><p>{dsActionAnalytics::action_description}</p></td>
				<td><p>{dsActionAnalytics::action_views}</p></td>
				<td><p>{dsActionAnalytics::module_name}</p></td>
	        </tr>
	    </table>
    </div>
	</div>
</div>

<!-- InstanceEndEditable -->

</div>

</body>
<!-- InstanceEnd --></html>
