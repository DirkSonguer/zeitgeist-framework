<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/admin.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- InstanceBeginEditable name="doctitle" -->
<title>Zeitgeist Administrator</title>
<!-- InstanceEndEditable -->

<link rel="stylesheet" type="text/css" href="@@{templatepath}@@/css/admin.css" />

<script language="javascript" type="text/javascript">

	var bShowShortcuts = false;
	shortcutUp = new Image();
	shortcutUp.src = "@@{templatepath}@@/nuvola/22x22/actions/1uparrow.png";
	shortcutDown = new Image();
	shortcutDown.src = "@@{templatepath}@@/nuvola/22x22/actions/tool_dock.png";

	function showTooltip(text, event)
	{
		document.getElementById('Tooltip').innerHTML = text;

		var topPixel = event.clientY + 10;
		var leftPixel = event.clientX + 10;

		document.getElementById('Tooltip').style.top = topPixel + "px";
		document.getElementById('Tooltip').style.left = leftPixel + "px";
		document.getElementById('Tooltip').style.display = "block";
	}

	function hideTooltip()
	{
		document.getElementById('Tooltip').innerHTML = "";

		document.getElementById('Tooltip').style.top = "0px";
		document.getElementById('Tooltip').style.left = "0px";
		document.getElementById('Tooltip').style.display = "none";
	}
	
	function showShortcuts()
	{
		if (bShowShortcuts == false)
		{
			bShowShortcuts = true;
			document.getElementById('Shortcuts').style.display = "block";
			document.images["shortcutIcon"].src = shortcutUp.src;
		}
		else
		{
			bShowShortcuts = false;
			document.getElementById('Shortcuts').style.display = "none";
			document.images["shortcutIcon"].src = shortcutDown.src;
		}
	}

</script>
	
<!-- InstanceBeginEditable name="head" -->

	<script language="JavaScript" type="text/javascript" src="@@{templatepath}@@/Spry/SpryData.js"></script>	
	<script language="JavaScript" type="text/javascript" src="@@{templatepath}@@/Spry/xpath.js"></script>
	<script language="Javascript" type="text/javascript" src="@@{templatepath}@@/Spry/SpryNestedXMLDataSet.js"></script>
	<script language="Javascript" type="text/javascript" src="@@{templatepath}@@/js/SpryExtensions.js"></script>

	<script type="text/javascript">	
	
		var dsOverviewModules = new Spry.Data.XMLDataSet("@@{[dataserver.getmoduleinfo]}@@", "container/element", { filterFunc: paginationFunc });
		dsOverviewModules.setColumnType("module_id", "number");

		function paginationFunc(ds, row, rowNumber)
		{
			if (rowNumber < paginationOffset || rowNumber >= paginationStop)
				return null;
			return row;
		}
		
		function pagination(direction)
		{
			if (direction == 'up')
			{
				updatePagination(paginationOffset + paginationSize, dsOverviewModules);
			}
			else
			{
				updatePagination(paginationOffset - paginationSize, dsOverviewModules);
			}
		}
		
		function deleteModule(id, name)
		{
			var answer = window.confirm("Do you really want to delete the module '" + name + "'?");    
			
			/* Question icon, Yes/No button. */
			/* 0 = error, 1 = OK, 2 = Cancel, 3 = No, 4 = Yes */
			
			if (answer == true)
			{
			   window.location.href = "@@{[setup.deletemodule]}@@"+"&id="+id;
			}
		}		
	</script>


<!-- InstanceEndEditable -->
</head>

<body>

<div id="Tooltip" class="tooltip" style="display: none;"></div>
<div class="maincontent">
<div class="headmenu">
		<h1><img src="@@{templatepath}@@/nuvola/32x32/apps/kcontrol.png" alt="" align="left" style="margin-right:10px;" /> ZGA <i>zeitgeist administration tool</i></h1>
	
	<!-- TemplateBeginBlock name="mainmenu" -->
		<div class="menuleiste">
		
		<div class="menuicon"><a href="@@{[main.index]}@@" alt=""><span onmousemove="showTooltip('ZGA Index', event)" onmouseout="hideTooltip()">
        <img src="@@{templatepath}@@/nuvola/22x22/actions/gohome.png" alt="" align="left" border="0" /></span></a></div>
		<div class="menuicon"><a href="@@{[setup.index]}@@" alt=""><span onmousemove="showTooltip('Setup application', event)" onmouseout="hideTooltip()">
        <img src="@@{templatepath}@@/nuvola/22x22/apps/kcmkwm.png" alt="" align="left" border="0" /></a></span></div>
		<div class="menuicon"><a href="@@{[users.index]}@@" alt=""><span onmousemove="showTooltip('Manage application users', event)" onmouseout="hideTooltip()">
        <img src="@@{templatepath}@@/nuvola/22x22/apps/kuser.png" alt="" align="left" border="0" /></a></span></div>
		<div class="menuicon"><a href="@@{[analyse.index]}@@" alt=""><span onmousemove="showTooltip('Analyse application traffic', event)" onmouseout="hideTooltip()">
        <img src="@@{templatepath}@@/nuvola/22x22/apps/kchart.png" alt="" align="left" border="0" /></a></span></div>
		<div class="menuicon"><a href="@@{[configure.index]}@@" alt=""><span onmousemove="showTooltip('Configure ZGA', event)" onmouseout="hideTooltip()">
        <img src="@@{templatepath}@@/nuvola/22x22/apps/kcmdf.png" alt="" align="left" border="0" /></a></span></div>
		<div class="menuicon" style="float:right;"><a href="@@{[main.logout]}@@" alt=""><span onmousemove="showTooltip('Logout', event)" onmouseout="hideTooltip()">
        <img src="@@{templatepath}@@/nuvola/22x22/actions/exit.png" alt="" align="left" border="0" /></a></span></div>
		<div class="menuicon" style="float:right;"><a href="javascript:showShortcuts();" alt=""><span onmousemove="showTooltip('Show/hide shortcuts', event)" onmouseout="hideTooltip()">
        <img src="@@{templatepath}@@/nuvola/22x22/actions/tool_dock.png" alt="" name="shortcutIcon" align="left" border="0" /></a></span></div>
		
		<div style="clear:both"></div>
		</div>
	<!-- TemplateEndBlock -->
</div>

<div class="textbox" id="Shortcuts" style="margin-top:-15px; padding:5px; display:none;">
	<div class="menuicon"><a href="@@{[setup.managemodules]}@@" alt=""><span onmousemove="showTooltip('Manage modules', event)" onmouseout="hideTooltip()">
	<img src="@@{templatepath}@@/nuvola/22x22/apps/kalzium.png" alt="" border="0" /></span></a></div>
	<div class="menuicon"><a href="@@{[setup.manageactions]}@@" alt=""><span onmousemove="showTooltip('Manage actions', event)" onmouseout="hideTooltip()">
	<img src="@@{templatepath}@@/nuvola/22x22/apps/flashkard.png" alt="" align="left" border="0" /></a></span></div>
	<div class="menuicon"><a href="@@{[setup.manageuserroles]}@@" alt=""><span onmousemove="showTooltip('Manage userroles', event)" onmouseout="hideTooltip()">
	<img src="@@{templatepath}@@/nuvola/22x22/mimetypes/vcard.png" alt="" align="left" border="0" /></a></span></div>
	<div class="menuicon"><a href="@@{[setup.manageusedata]}@@" alt=""><span onmousemove="showTooltip('Manage userdata', event)" onmouseout="hideTooltip()">
	<img src="@@{templatepath}@@/nuvola/22x22/mimetypes/wordprocessing.png" alt="" align="left" border="0" /></a></span></div>

	<div style="clear:both"></div>
</div>

<!-- InstanceBeginEditable name="pagetitle" -->

<h2>Manage modules</h2>

<!-- InstanceEndEditable -->

	<!-- TemplateBeginBlock name="usermessage" -->
		<h3 class="usermessage"><img src="@@{templatepath}@@/nuvola/16x16/actions/ok.png" alt="" align="left" style="margin-right:5px;" /> @@{usermessage}@@</h3>
	<!-- TemplateEndBlock -->

	<!-- TemplateBeginBlock name="userwarnings" -->
		<h3 class="userwarning"><img src="@@{templatepath}@@/nuvola/16x16/actions/messagebox_info.png" alt="" align="left" style="margin-right:5px;" /> @@{userwarning}@@</h3>
	<!-- TemplateEndBlock -->

	<!-- TemplateBeginBlock name="usererrors" -->
		<h3 class="usererror"><img src="@@{templatepath}@@/nuvola/16x16/actions/no.png" alt="" align="left" style="margin-right:5px;" /> @@{usererror}@@</h3>
	<!-- TemplateEndBlock -->
	
<!-- InstanceBeginEditable name="body" -->

<div class="textbox">
	<h3><img src="@@{templatepath}@@/nuvola/22x22/actions/view_bottom.png" alt="" align="left" style="margin-right:10px;" /> <a href="@@{[setup.addmodule]}@@" alt="add new module">Add new module</a></h3>
</div>

<div class="textbox">
	<div spry:region="dsOverviewModules">
    <div spry:state="loading"><p style="text-align:center;"><img src="@@{templatepath}@@/images/loading.gif" alt="" /></p></div>

	<div spry:state="ready">
	    <table border="0" cellspacing="0" cellpadding="0" width=100%">
	        <tr>
				<td colspan="2" align="left"><p><span onmousemove="showTooltip('Previous Page', event)" onmouseout="hideTooltip()"><img src="@@{templatepath}@@/nuvola/16x16/actions/previous.png" alt="" style="margin-left:5px;" onclick="pagination('down');" /></span></p></td>
                <td><div id="pageinfo"><p>&nbsp;</p></div>
                	<script type="text/javascript">
                    	showPaginationInfo('pageinfo', dsOverviewModules);
                    </script>
                </td>
				<td colspan="2" align="right"><p style="text-align:right;"><span onmousemove="showTooltip('Next Page', event)" onmouseout="hideTooltip()"><img src="@@{templatepath}@@/nuvola/16x16/actions/next.png" alt="" style="margin-right:5px;" onclick="pagination('up');" /></span></p></td>
	        </tr>      
	        <tr class="tablehead">
				<th><p><a onClick="dsOverviewModules.sort('module_id');">ID</a></p></th>
				<th><p><a onClick="dsOverviewModules.sort('module_name');">Name</a></p></th>
				<th><p>Description</p></th>
				<th><p><a onClick="dsOverviewModules.sort('module_active');">Active</a></p></th>
				<th><p>Action</p></th>
	        </tr>
	        <tr class="{ds_EvenOddRow}" spry:repeat="dsOverviewModules">
				<td><p>{dsOverviewModules::module_id}</p></td>
				<td><p>{dsOverviewModules::module_name}</p></td>
				<td><p>{dsOverviewModules::module_description}</p></td>
				<td><p>{dsOverviewModules::module_active}</p></td>
				<td width="90"><p>
				<a href="@@{[setup.editmodule]}@@&id={dsOverviewModules::module_id}" alt="edit module"><img src="@@{templatepath}@@/nuvola/22x22/actions/pencil.png" alt="edit module" border="0" /></a> &nbsp; <a href="javascript:deleteModule({dsOverviewModules::module_id}, '{dsOverviewModules::module_name}')" alt="delete module"><img src="@@{templatepath}@@/nuvola/22x22/actions/cancel.png" alt="delete module" border="0" /></a>
                </p></td>
	        </tr>
	    </table>
    </div>
	</div>	
</div>

<div class="textbox">
	<h3><img src="@@{templatepath}@@/nuvola/22x22/actions/2leftarrow.png" alt="" align="left" style="margin-right:10px;" /> <a href="@@{[setup.index]}@@" alt="Back to application setup">Back to application setup</a></h3>
</div>

<!-- InstanceEndEditable -->

</div>

</body>
<!-- InstanceEnd --></html>
