<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/admin.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- InstanceBeginEditable name="doctitle" -->
<title>Zeitgeist Administrator</title>
<!-- InstanceEndEditable -->

<link rel="stylesheet" type="text/css" href="@@{templatepath}@@/css/admin.css" />
<!-- InstanceBeginEditable name="head" -->

	<script language="JavaScript" type="text/javascript" src="@@{templatepath}@@/Spry/SpryData.js"></script>	
	<script language="JavaScript" type="text/javascript" src="@@{templatepath}@@/Spry/xpath.js"></script>
	<script language="Javascript" type="text/javascript" src="@@{templatepath}@@/Spry/SpryNestedXMLDataSet.js"></script>

	<script type="text/javascript">
		var dsOverviewModules = new Spry.Data.XMLDataSet("@@{[dataserver.getmoduleinfo]}@@", "container/element");
		dsOverviewModules.setColumnType("module_id", "number");

		function deleteModule(id, name)
		{
			var answer = window.confirm("Do you really want to delete the module '" + name + "'?");    
			
			/* Question icon, Yes/No button. */
			/* 0 = error, 1 = OK, 2 = Cancel, 3 = No, 4 = Yes */
			
			if (answer == true)
			{
			   window.location.href = "@@{[setup.deletemodule]}@@"+"&id="+id;
			}
		}
	</script>


<!-- InstanceEndEditable -->
</head>

<body>

<div class="maincontent">
<div class="headmenu">
        <h1><img src="@@{templatepath}@@/nuvola/32x32/apps/kcontrol.png" alt="" align="left" style="margin-right:10px;" /> ZGA <i>zeitgeist administration tool</i></h1>
    
    <!-- TemplateBeginBlock name="mainmenu" -->
        <div class="menuleiste">
        
        <div class="menuicon"><a href="@@{[setup.index]}@@" alt=""><img src="@@{templatepath}@@/nuvola/22x22/actions/gohome.png" alt="" align="left" border="0" /></a>
        <span class="menuitem"><a href="@@{[main.index]}@@" alt="">ZGA Index</a></span></div>
        <div class="menuicon"><a href="@@{[setup.index]}@@" alt=""><img src="@@{templatepath}@@/nuvola/22x22/apps/kcmkwm.png" alt="" align="left" border="0" /></a>
        <span class="menuitem"><a href="@@{[setup.index]}@@" alt="">Setup application</a></span></div>
        <div class="menuicon"><a href="@@{[users.index]}@@" alt=""><img src="@@{templatepath}@@/nuvola/22x22/apps/kuser.png" alt="" align="left" border="0" /></a>
        <span class="menuitem"><a href="@@{[users.index]}@@" alt="">Manage application users</a></span></div>
        <div class="menuicon"><a href="@@{[configure.index]}@@" alt=""><img src="@@{templatepath}@@/nuvola/22x22/apps/kcmdf.png" alt="" align="left" border="0" /></a>
        <span class="menuitem"><a href="@@{[configure.index]}@@" alt="">Configure ZGA</a></span></div>
        <div class="menuicon" style="float:right;"><a href="@@{[main.logout]}@@" alt=""><img src="@@{templatepath}@@/nuvola/22x22/actions/exit.png" alt="" align="left" border="0" /></a>
        <span class="menuitem"><a href="@@{[main.logout]}@@" alt="">Logout</a></span></div>
        
        <div style="clear:both"></div>
        </div> 
    <!-- TemplateEndBlock -->
</div>

<!-- InstanceBeginEditable name="pagetitle" -->

<h2>Manage modules</h2>

<!-- InstanceEndEditable -->

    <!-- TemplateBeginBlock name="usermessage" -->
        <h3 class="usermessage"><img src="@@{templatepath}@@/nuvola/16x16/actions/ok.png" alt="" align="left" style="margin-right:5px;" /> @@{usermessage}@@</h3>
    <!-- TemplateEndBlock -->

    <!-- TemplateBeginBlock name="userwarnings" -->
        <h3 class="userwarning"><img src="@@{templatepath}@@/nuvola/16x16/actions/messagebox_info.png" alt="" align="left" style="margin-right:5px;" /> @@{userwarning}@@</h3>
    <!-- TemplateEndBlock -->

    <!-- TemplateBeginBlock name="usererrors" -->
        <h3 class="usererror"><img src="@@{templatepath}@@/nuvola/16x16/actions/no.png" alt="" align="left" style="margin-right:5px;" /> @@{usererror}@@</h3>
    <!-- TemplateEndBlock -->
    
<!-- InstanceBeginEditable name="body" -->

<div class="textbox">
	<h3><img src="@@{templatepath}@@/nuvola/22x22/actions/view_bottom.png" alt="" align="left" style="margin-right:10px;" /> <a href="@@{[setup.addmodule]}@@" alt="add new module">Add new Module</a></h3>
</div>

<div class="textbox">
	<div spry:region="dsOverviewModules">
    <div spry:state="loading"><p style="text-align:center;"><img src="@@{templatepath}@@/images/loading.gif" alt="" /></p></div>

	<div spry:state="ready">
	    <table border="0" cellspacing="0" cellpadding="0" width=100%">
	        <tr class="tablehead">
				<th><p><a onClick="dsOverviewModules.sort('module_id');">ID</a></p></th>
				<th><p><a onClick="dsOverviewModules.sort('module_name');">Name</a></p></th>
				<th><p>Description</p></th>
				<th><p><a onClick="dsOverviewModules.sort('module_active');">Active</a></p></th>
				<th><p>Action</p></th>
	        </tr>			
	        <tr class="{ds_EvenOddRow}" spry:repeat="dsOverviewModules">
				<td><p>{dsOverviewModules::module_id}</p></td>
				<td><p>{dsOverviewModules::module_name}</p></td>
				<td><p>{dsOverviewModules::module_description}</p></td>
				<td><p>{dsOverviewModules::module_active}</p></td>
				<td width="90"><p>
				<a href="@@{[setup.editmodule]}@@&id={dsOverviewModules::module_id}" alt="edit module"><img src="@@{templatepath}@@/nuvola/22x22/actions/pencil.png" alt="edit module" border="0" /></a> &nbsp; <a href="javascript:deleteModule({dsOverviewModules::module_id}, '{dsOverviewModules::module_name}')" alt="delete module"><img src="@@{templatepath}@@/nuvola/22x22/actions/cancel.png" alt="delete module" border="0" /></a>
                </p></td>
	        </tr>
	    </table>
    </div>
	</div>	
</div>

<div class="textbox">
	<h3><img src="@@{templatepath}@@/nuvola/22x22/actions/2leftarrow.png" alt="" align="left" style="margin-right:10px;" /> <a href="@@{[setup.index]}@@" alt="Back to application setup">Back to application setup</a></h3>
</div>

<!-- InstanceEndEditable -->

</div>

</body>
<!-- InstanceEnd --></html>
